# Interaction Guidance

A contextual hint that guides users from drill-down analysis to regression for interaction effects.

## Overview

The Interaction Guidance component appears in the Variation Funnel when users have selected 2+ factors. It educates users about the limitation of sequential ANOVA (main effects only) and provides a direct link to the Regression Panel.

## Usage

```tsx
import InteractionGuidance from './components/InteractionGuidance';

<InteractionGuidance
  drillFactorCount={selectedFactors.size}
  drillFactors={Array.from(selectedFactors)}
  columnAliases={columnAliases}
  onNavigateToRegression={() => setActiveView('regression')}
/>;
```

## Props

| Prop                   | Type                   | Default   | Description                      |
| ---------------------- | ---------------------- | --------- | -------------------------------- |
| drillFactorCount       | number                 | required  | Number of factors in drill stack |
| drillFactors           | string[]               | []        | Factor names for example text    |
| columnAliases          | Record<string, string> | {}        | Display names for factors        |
| onNavigateToRegression | () => void             | undefined | Navigation callback              |

## Visibility Logic

- **Shows:** When `drillFactorCount >= 2`
- **Hides:** When fewer than 2 factors selected

## Visual Design

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¡ Analyzing multiple factors?                                     â”‚
â”‚                                                                    â”‚
â”‚ Your drill-down shows main effects. To check if factors interact  â”‚
â”‚ (e.g., Shift performance varies by Machine), use the Regression   â”‚
â”‚ Panel with "Include interactions".                                â”‚
â”‚                                                                    â”‚
â”‚ [Check Interactions â†’]                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Structure:**

- Container: Blue accent background (`bg-blue-500/10`) with border (`border-blue-500/30`)
- Icon: Lightbulb (Lucide), 16px, `text-blue-400`
- Title: 14px semi-bold, `text-blue-300`
- Body: 12px, `text-content-secondary` with emphasized spans
- Button: Inline text button with arrow icon, hover effect

## Dynamic Example Text

The component generates contextual example text based on actual factors:

```typescript
// With drillFactors = ['Shift', 'Machine']
'e.g., Shift performance varies by Machine';

// Fallback when fewer factors available
'e.g., Machine C is only problematic on Night shift';
```

Column aliases are applied for user-friendly display names.

## Integration

Located in `VariationFunnel.tsx`, below the cumulative summary section:

```tsx
// apps/pwa/src/components/VariationFunnel.tsx
<InteractionGuidance
  drillFactorCount={filterStack?.length ?? 0}
  drillFactors={filterStack?.map(f => f.factor) ?? []}
  columnAliases={columnAliases}
  onNavigateToRegression={onNavigateToRegression}
/>
```

## Accessibility

- Button is keyboard accessible with focus states
- Color contrast meets WCAG AA for informational text
- No auto-dismiss behavior â€” user controls navigation

## Files

| File                                                             | Purpose   |
| ---------------------------------------------------------------- | --------- |
| `apps/pwa/src/components/InteractionGuidance.tsx`                | Component |
| `apps/pwa/src/components/__tests__/InteractionGuidance.test.tsx` | Tests     |

## Related Components

- `VariationFunnel.tsx` â€” Parent component that renders InteractionGuidance
- `FunnelPanel.tsx` â€” Passes navigation callback through to VariationFunnel
- [Regression Panel](../../03-features/analysis/regression.md#interaction-effects) â€” Target destination

## See Also

- [Drill-Down: When to Check for Interactions](../../03-features/navigation/drill-down.md#when-to-check-for-interactions)
- [Regression: Interaction Effects](../../03-features/analysis/regression.md#interaction-effects)
